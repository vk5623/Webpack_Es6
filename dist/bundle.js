!function(t){var e={};function a(s){if(e[s])return e[s].exports;var i=e[s]={i:s,l:!1,exports:{}};return t[s].call(i.exports,i,i.exports,a),i.l=!0,i.exports}a.m=t,a.c=e,a.d=function(t,e,s){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},a.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(a.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)a.d(s,i,function(e){return t[e]}.bind(null,i));return s},a.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="",a(a.s=0)}([function(t,e,a){"use strict";a.r(e);var s={create:function(){this.background=this.game.add.sprite(0,0,"backyard"),this.background.inputEnabled=!0,this.background.events.onInputDown.add(this.placeItem,this),this.pet=this.game.add.sprite(100,400,"pet"),this.pet.anchor.setTo(.5),this.pet.animations.add("funnyfaces",[1,2,3,2,1],7,!1),this.pet.customParams={health:100,fun:100},this.pet.inputEnabled=!0,this.pet.input.enableDrag(),this.apple=this.game.add.sprite(72,570,"apple"),this.apple.anchor.setTo(.5),this.apple.inputEnabled=!0,this.apple.customParams={health:20},this.apple.events.onInputDown.add(this.pickItem,this),this.candy=this.game.add.sprite(144,570,"candy"),this.candy.anchor.setTo(.5),this.candy.inputEnabled=!0,this.candy.customParams={health:-10,fun:10},this.candy.events.onInputDown.add(this.pickItem,this),this.toy=this.game.add.sprite(216,570,"toy"),this.toy.anchor.setTo(.5),this.toy.inputEnabled=!0,this.toy.customParams={fun:20},this.toy.events.onInputDown.add(this.pickItem,this),this.rotate=this.game.add.sprite(288,570,"rotate"),this.rotate.anchor.setTo(.5),this.rotate.inputEnabled=!0,this.rotate.events.onInputDown.add(this.rotatePet,this),this.buttons=[this.apple,this.candy,this.toy,this.rotate],this.selectedItem=null,this.uiBlocked=!1;var t={font:"20px Arial",fill:"#fff"};this.game.add.text(10,20,"Health:",t),this.game.add.text(140,20,"Fun:",t),this.healthText=this.game.add.text(80,20,"",t),this.funText=this.game.add.text(185,20,"",t),this.refreshStats(),this.statsDecreaser=this.game.time.events.loop(5*Phaser.Timer.SECOND,this.reduceProperties,this)},pickItem:function(t,e){this.uiBlocked||(console.log("pick item"),this.clearSelection(),t.alpha=.4,this.selectedItem=t)},rotatePet:function(t,e){if(!this.uiBlocked){this.uiBlocked=!0,this.clearSelection(),t.alpha=.4;var a=this.game.add.tween(this.pet);a.to({angle:"+720"},1e3),a.onComplete.add(function(){this.uiBlocked=!1,t.alpha=1,this.pet.customParams.fun+=10,this.refreshStats()},this),a.start()}},clearSelection:function(){this.buttons.forEach(function(t,e){t.alpha=1}),this.selectedItem=null},placeItem:function(t,e){if(this.selectedItem&&!this.uiBlocked){var a=e.position.x,s=e.position.y,i=this.game.add.sprite(a,s,this.selectedItem.key);i.anchor.setTo(.5),i.customParams=this.selectedItem.customParams,this.uiBlocked=!0;var o=this.game.add.tween(this.pet);o.to({x:a,y:s},700),o.onComplete.add(function(){var t;for(t in i.destroy(),this.pet.animations.play("funnyfaces"),this.uiBlocked=!1,i.customParams)i.customParams.hasOwnProperty(t)&&(this.pet.customParams[t]+=i.customParams[t]);this.refreshStats()},this),o.start()}},refreshStats:function(){this.healthText.text=this.pet.customParams.health,this.funText.text=this.pet.customParams.fun},reduceProperties:function(){this.pet.customParams.health-=10,this.pet.customParams.fun-=15,this.refreshStats()},update:function(){(this.pet.customParams.health<=0||this.pet.customParams.fun<=0)&&(this.pet.frame=4,this.uiBlocked=!0,this.game.time.events.add(2e3,this.gameOver,this))},gameOver:function(){this.state.start("HomeState",!0,!1,"GAME OVER!")}},i={init:function(){this.scale.scaleMode=Phaser.ScaleManager.SHOW_ALL,this.scale.pageAlignHorizontally=!0,this.scale.pageAlignVertically=!0},preload:function(){console.log("boot preload"),this.load.image("preloadBar","assets/images/bar.png"),this.load.image("logo","assets/images/logo.png")},create:function(){this.game.stage.backgroundColor="#fff",this.state.start("PreloadState")}},o=new Phaser.Game(360,640,Phaser.AUTO);o.state.add("GameState",s),o.state.add("HomeState",{init:function(t){this.message=t},create:function(){var t=this.game.add.sprite(0,0,"backyard");t.inputEnabled=!0,t.events.onInputDown.add(function(){this.state.start("GameState")},this);var e={font:"35px Arial",fill:"#fff"};this.game.add.text(30,this.game.world.centerY+200,"TOUCH TO START",e),this.message&&this.game.add.text(60,this.game.world.centerY-200,this.message,e)}}),o.state.add("PreloadState",{preload:function(){this.logo=this.add.sprite(this.game.world.centerX,this.game.world.centerY,"logo"),this.logo.anchor.setTo(.5),this.preloadBar=this.add.sprite(this.game.world.centerX,this.game.world.centerY+128,"preloadBar"),this.preloadBar.anchor.setTo(.5),this.load.setPreloadSprite(this.preloadBar),this.load.image("backyard","assets/images/backyard.png"),this.load.image("apple","assets/images/apple.png"),this.load.image("candy","assets/images/candy.png"),this.load.image("rotate","assets/images/rotate.png"),this.load.image("toy","assets/images/rubber_duck.png"),this.load.image("arrow","assets/images/arrow.png"),this.load.spritesheet("pet","assets/images/pet.png",97,83,5,1,1)},create:function(){this.state.start("HomeState")}}),o.state.add("BootState",i),o.state.start("BootState")}]);